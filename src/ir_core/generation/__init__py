from ..config import settings
from .base import BaseGenerator
from .openai import OpenAIGenerator
from .ollama import OllamaGenerator

def get_generator() -> BaseGenerator:
    """
    Factory function to get the appropriate generator based on settings.

    This function reads the `GENERATOR_TYPE` from the project settings
    and returns an initialized instance of the corresponding generator class.

    Returns:
        An instance of a class that inherits from BaseGenerator.

    Raises:
        ValueError: If the configured generator_type is unknown.
    """
    generator_type = settings.GENERATOR_TYPE.lower()
    model_name = settings.GENERATOR_MODEL_NAME

    if generator_type == "openai":
        return OpenAIGenerator(model_name=model_name)
    elif generator_type == "ollama":
        return OllamaGenerator(model_name=model_name)
    else:
        raise ValueError(f"Unknown generator type configured: '{settings.GENERATOR_TYPE}'")

__all__ = ["get_generator", "BaseGenerator"]
